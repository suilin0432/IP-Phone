import pyaudio
import threading
import time
import collections

# 音频录音器
class AudioRecorder(threading.Thread):
    def __init__(self, Client, p, CHUNK=256, FORMAT = pyaudio.paInt16, CHANNELS = 2, RATE = 2560):
        # 设置参数比如录制时间等
        # RATE: 一秒钟采样的点数
        # CHUNK: 一个Frame采样个数
        # 也就是 可以用这两个参数控制 一个片段的时间 预计 0.05秒传递一个片段 所以设置 CHUNK = RATE/20
        # paInt16 一个占据 4 bytes 所以 CHUNK * 4 = 512 没有超过 1024 限制, 所以先这么设置
        threading.Thread.__init__(self)
        self.Client = Client
        self.CHUNK = CHUNK
        self.FORMAT = FORMAT
        self.CHANNELS = CHANNELS
        self.RATE = RATE
        self.p = p

    def run(self):
        stream = self.p.open(format=self.FORMAT,
                        channels=self.CHANNELS,
                        rate=self.RATE,
                        input=True,
                        frames_per_buffer=self.CHUNK)
        # print("Recorder", self.Client.STATE)
        while self.Client.STATE != "CONNECTED":
            time.sleep(0.1)
        # print("Recorder", self.Client.STATE)
        index = 0
        # test = b':\x00:\x00g\x00g\x00l\x00m\x00q\x00p\x00m\x00m\x00\x8d\x00\x8d\x00p\x00o\x00\x19\x00\x19\x00\xba\xff\xbb\xff\x80\xff\x7f\xffb\xffc\xffr\xffr\xffb\xffb\xff^\xff]\xffk\xffk\xffJ\xffJ\xffh\xffg\xff\xcc\xff\xcc\xff\x12\x00\x13\x00j\x00i\x00\x91\x00\x92\x00\x9b\x00\x9a\x00~\x00\x7f\x00m\x00m\x00D\x00D\x00\xdc\xff\xdc\xff\xb0\xff\xb0\xff\x10\xff\x10\xffw\xfew\xfe\xfe\xfd\xfe\xfd\x07\xfe\x07\xfe*\xfe+\xfe\\\xfe[\xfe\x97\xfe\x97\xfe\xbf\xfe\xbf\xfe\xe1\xfe\xe1\xfe\xce\xfe\xcd\xfe\x1f\xff\x1f\xffh\xffh\xff\x8c\xff\x8c\xff\x90\xff\x90\xff\x92\xff\x92\xff\x7f\xff\x7f\xff`\xff`\xff@\xff?\xffG\xffH\xffw\xffx\xffb\xffa\xffK\xffK\xff\xeb\xfe\xeb\xfe\x9e\xfe\x9e\xfex\xfex\xfe\x85\xfe\x85\xfe\x96\xfe\x95\xfep\xfep\xfe]\xfe]\xfe[\xfe[\xfet\xfet\xfe\xa5\xfe\xa5\xfe\xe7\xfe\xe7\xfe\n\xff\n\xff)\xff)\xff=\xff>\xff\x1a\xff\x1a\xff\x07\xff\x07\xff\xf9\xfe\xf9\xfe\xd5\xfe\xd5\xfe\xe0\xfe\xe0\xfe\xb0\xfe\xb0\xfe\x91\xfe\x91\xfe8\xfe9\xfe\t\xfe\x08\xfe\xfd\xfd\xfd\xfd)\xfe)\xfe|\xfe|\xfe\xb4\xfe\xb5\xfe\xce\xfe\xce\xfe\xcb\xfe\xca\xfe\x12\xff\x12\xffN\xffN\xff\x8a\xff\x8a\xff\xa8\xff\xa8\xff\xaf\xff\xb1\xff\x8c\xff\x8b\xffX\xffX\xff\x1e\xff\x1e\xff/\xff/\xff\x12\xff\x12\xff\xf4\xfe\xf4\xfe\xe7\xfe\xe7\xfen\xfen\xfe\x0c\xfe\x0c\xfe\xc3\xfd\xc3\xfd\xe9\xfd\xe9\xfd\xf0\xfd\xef\xfd\x01\xfe\x01\xfe\xfe\xfd\xfd\xfd\xd0\xfd\xd1\xfd\xc8\xfd\xc8\xfd\x05\xfe\x05\xfeF\xfeF\xfe{\xfez\xfe\x9b\xfe\x9b\xfe\xa4\xfe\xa3\xfe\x99\xfe\x99\xfe\xa0\xfe\xa0\xfe\xa8\xfe\xa8\xfe\xc0\xfe\xc0\xfe\xd1\xfe\xd2\xfe\x8b\xfe\x8b\xfeL\xfeL\xfe\xee\xfd\xef\xfd\xa3\xfd\xa3\xfd\x87\xfd\x87\xfdq\xfdp\xfdQ\xfdR\xfd\x87\xfd\x87\xfdk\xfdk\xfd3\xfd3\xfd\t\xfd\t\xfd\xa3\xfd\xa3\xfdh\xfdh\xfd\x84\xfd\x84\xfd\xba\xfe\xba\xfe\x8a\x00\x8a\x00y\x01y\x01\xe2\x00\xe3\x00\xe2\xff\xe2\xffF\xffF\xff\x9c\xff\x9c\xff\xd2\xff\xd1\xff\x94\xff\x93\xff-\xff-\xff\xf5\xfe\xf6\xfe\x16\xff\x15\xffF\xffG\xffk\xffk\xff\x8d\xff\x8d\xff\xa8\xff\xa8\xff\xb2\xff\xb2\xff\xea\xff\xeb\xff,\x00-\x00Y\x00X\x00d\x00e\x00n\x00n\x00i\x00j\x00}\x00}\x00\xb6\x00\xb6\x00\xce\x00\xce\x00\xd4\x00\xd4\x00\x9f\x00\x9f\x00b\x00b\x008\x007\x00\x01\x00\x01\x00\xd2\xff\xd3\xff\xcb\xff\xcb\xff\xc8\xff\xc8\xff\xaa\xff\xa9\xff\x92\xff\x92\xffv\xffv\xff\x99\xff\x99\xff\xc5\xff\xc6\xff\xf3\xff\xf3\xff\x00\x00\x00\x00\x02\x00\x01\x00\x04\x00\x05\x00\x15\x00\x15\x00\x14\x00\x15\x00\'\x00\'\x00a\x00`\x00}\x00~\x00|\x00|\x00\x82\x00\x83\x00q\x00q\x00@\x00@\x00U\x00U\x00\x84\x00\x84\x00\xa9\x00\xaa\x00\xb6\x00\xb5\x00\xba\x00\xba\x00\xd7\x00\xd7\x00-\x01-\x01\x93\x01\x93\x01\xd4\x01\xd4\x01\x02\x02\x02\x02\x1b\x02\x1c\x02\'\x02&\x02\t\x02\t\x02\xe8\x01\xe7\x01\xc6\x01\xc6\x01\xc0\x01\xbf\x01\xa2\x01\xa2\x01j\x01i\x01*\x01*\x01\xe1\x00\xe1\x00\xcc\x00\xcc\x00\xa9\x00\xa8\x00\xa7\x00\xa6\x00\xab\x00\xab\x00\x96\x00\x97\x00}\x00}\x00\x8e\x00\x8e\x00\xa3\x00\xa3\x00\xcf\x00\xcf\x00\xe5\x00\xe5\x00\xd5\x00\xd4\x00\xc1\x00\xc2\x00\xcd\x00\xcd\x00\xcc\x00\xcc\x00\xce\x00\xce\x00\xd7\x00\xd7\x00\xa9\x00\xaa\x00q\x00q\x000\x000\x00\xf3\xff\xf4\xff\xbb\xff\xbb\xff\x9a\xff\x9a\xff\x9a\xff\x9a\xff\x95\xff\x95\xff\xa4\xff\xa3\xff\xaa\xff\xab\xff\xab\xff\xac\xff\xde\xff\xdd\xff/\x000\x00X\x00X\x00\x9a\x00\x9a\x00\xae\x00\xae\x00\xbb\x00\xba\x00\xcc\x00\xcc\x00\xee\x00\xee\x00\x08\x01\x08\x01\x1e\x01\x1e\x01\xe3\x00\xe3\x00\xc1\x00\xc1\x00z\x00z\x00@\x00@\x00\x1d\x00\x1c\x00\x1b\x00\x1b\x00,\x00,\x006\x006\x00L\x00L\x00K\x00J\x00\x87\x00\x86\x00\xc2\x00\xc3\x00\x1f\x01\x1f\x014\x014\x01%\x01%\x01J\x01K\x01%\x01%\x01\xf3\x00\xf3\x00\x06\x01\x06\x01\xe8\x00\xe8\x00\xc1\x00\xc1\x00\x7f\x00\x7f\x00H\x00H\x00-\x00.\x00\x1d\x00\x1d\x00 \x00 \x001\x001\x00@\x00@\x00Z\x00Z\x00h\x00h\x00\x8d\x00\x8d\x00\xcc\x00\xcc\x002\x011\x01m\x01n\x01\x99\x01\x99\x01\xa2\x01\xa2\x01\x85\x01\x86\x01\x83\x01\x83\x01S\x01S\x01\x14\x01\x14\x01\xca\x00\xca\x00\x81\x00\x80\x00v\x00v\x00A\x00A\x00\x15\x00\x15\x00\x1e\x00\x1e\x00=\x00<\x00\x0e\x00\x0e\x00\xf6\xff\xf6\xff\x06\x00\x06\x00\xf9\xff\xf9\xff\x03\x00\x03\x00+\x00+\x00y\x00y\x00\x8f\x00\x8f\x00\x8c\x00\x8d\x00\x96\x00\x96\x00|\x00|\x00v\x00v\x00k\x00k\x00\x81\x00\x82\x00^\x00]\x00\x1c\x00\x1d\x00\xdf\xff\xdf\xff\xb4\xff\xb3\xff\x81\xff\x81\xff\x90\xff\x90\xff\x8e\xff\x8d\xff~\xff~\xffy\xffz\xffk\xffj\xffW\xffW\xff\xa4\xff\xa3\xff\xea\xff\xea\xff\x05\x00\x05\x00\x19\x00\x18\x00;\x00;\x001\x001\x00"\x00"\x00\x1a\x00\x1a\x00\x06\x00\x06\x00\x16\x00\x16\x00\xf1\xff\xf2\xff\xc3\xff\xc3\xff\x97\xff\x97\xff\x88\xff\x88\xffi\xffi\xff@\xff@\xff\'\xff\'\xff\x18\xff\x18\xff\xf5\xfe\xf5\xfe\xc4\xfe\xc4\xfe\xbc\xfe\xbc\xfe\xd8\xfe\xd8\xfe\x1d\xff\x1d\xffA\xffB\xff]\xff\\\xffW\xffX\xffC\xffC\xff)\xff)\xff\x05\xff\x05\xff\xe4\xfe\xe5\xfeM\xfeL\xfe\x8e\xfd\x8e\xfdv\xfcu\xfcQ\xf9Q\xf9\xc2\xf8\xc2\xf8\xf0\xf8\xf0\xf8i\xf9h\xf9\x10\xfa\x11\xfa\xc1\xfa\xc1\xfa\xed\xfb\xed\xfb^\xfc^\xfc1\xfd1\xfd\xd0\xfd\xd1\xfdO\xfeN\xfe\x8f\xfe\x90\xfe\x8e\xfe\x8e\xfe\x9e\xfe\x9f\xfe\x89\xfe\x8a\xfeu\xfeu\xfev\xfev\xfe\x98\xfe\x98\xfed\xfed\xfe\x06\xfe\x06\xfe\xd8\xfd\xd9\xfd\xb9\xfd\xb8\xfd\xbb\xfd\xbb\xfd\xc7\xfd\xc8\xfd\xf3\xfd\xf2\xfd\x16\xfe\x16\xfeL\xfeL\xfe$\xfe$\xfeY\xfeY\xfe\xa1\xfe\xa0\xfe\xdd\xfe\xdd\xfe\xa3\xfd\xa4\xfd\xb9\xfc\xb9\xfc\x89\xfc\x88\xfc\xab\xfc\xac\xfc\xdf\xfc\xdf\xfc\xf5\xfc\xf5\xfcL\xfdK\xfdj\xfdk\xfd\x99\xfd\x99\xfd\xab\xfd\xab\xfd\xb4\xfd\xb4\xfd\xcb\xfd\xcb\xfd\x1b\xfe\x1b\xfeV\xfeV\xfe\x98\xfe\x98\xfe\xaf\xfe\xaf\xfe\xf4\xfe\xf4\xfe,\xff,\xff\x8d\xff\x8d\xff\xf2\xff\xf2\xff\xfd\xff\xfd\xff\x03\x00\x03\x00\x08\x00\t\x00\xe1\xff\xe2\xff=\x00=\x00/\x00/\x00\xb0\x00\xb0\x00\xc9\x00\xc9\x00\x90\x00\x90\x00\xf8\x00\xf8\x00\x8d\x00\x8d\x00^\x00]\x008\x008\x00\x0c\x00\x0b\x00\x05\x00\x05\x00\x15\x00\x15\x00\x00\x00\x00\x00\xdc\xff\xdd\xff\x15\x00\x14\x00\x02\x00\x02\x00\x12\x00\x12\x00\x03\x00\x03\x00\xf0\xff\xf0\xff\xb1\xff\xb1\xff\x9b\xff\x9b\xff~\xff}\xffu\xffu\xff\x7f\xff\x7f\xfft\xfft\xff[\xff[\xff\x15\xff\x15\xff\xdb\xfe\xdc\xfe\xe0\xfe\xdf\xfe\xd2\xfe\xd2\xfe-\xff-\xffU\xffU\xff\xa8\xff\xa7\xff\x9e\xff\x9e\xff\xcf\xff\xcf\xff\xf4\xff\xf4\xff&\x00&\x007\x007\x009\x009\x00)\x00(\x00\xf5\xff\xf6\xff\xa8\xff\xa7\xff`\xff`\xffR\xffQ\xffN\xffO\xff\x02\xff\x01\xff\xc7\xfe\xc6\xfe\x83\xfe\x83\xfey\xfez\xfeU\xfeU\xfeX\xfeY\xfen\xfen\xfeU\xfeU\xfeD\xfeD\xfeN\xfeN\xfeU\xfeU\xfec\xfeb\xfeM\xfeL\xfeV\xfeW\xfe\xea\xfd\xe9\xfd\xb3\xfd\xb3\xfd\xc7\xfd\xc7\xfd\x92\xfd\x92\xfd\x8b\xfd\x8b\xfd\xb0\xfd\xb0\xfdh\xfdg\xfd\x1e\xfd\x1f\xfd\xa5\xfc\xa5\xfc\xb5\xfc\xb5\xfc\x97\xfc\x98\xfc\x9a\xfc\x9a\xfc\xc1\xfc\xc1\xfc\xe3\xfc\xe3\xfc\x1d\xfd\x1c\xfd.\xfd.\xfdJ\xfdI\xfd\xab\xfd\xab\xfd3\xfe2\xfe\x9e\xfe\x9f\xfe\x9a\xfe\x9a\xfe\xbe\xfe\xbe\xfe\xb9\xfe\xb9\xfe\x9c\xfe\x9c\xfe\xd1\xfe\xd1\xfe\xd0\xfe\xd1\xfe\x86\xfe\x86\xfeM\xfeM\xfe\x11\xfe\x11\xfe{\xfe{\xfe\xec\xfd\xed\xfdf\xfde\xfd\xbf\xfd\xbf\xfd\xa2\xfd\xa2\xfd\x89\xfd\x89\xfd\xc6\xfd\xc5\xfd\x7f\xfd\x7f\xfd\xcd\xfd\xce\xfdL\xfeK\xfe(\xfe)\xfe\x03\xfe\x03\xfe\xcd\xfd\xcd\xfd\x02\xfe\x02\xfe\xb8\xfd\xb8\xfd\x85\xfd\x85\xfd\x88\xfd\x88\xfd\xa1\xfd\xa1\xfd\x9c\xfd\x9d\xfd\x88\xfd\x88\xfd*\xfd+\xfd#\xfd#\xfd\x08\xfd\x08\xfd\x10\xfd\x11\xfd\xf6\xfc\xf6\xfc\x1c\xfd\x1c\xfd[\xfd[\xfde\xfde\xfd\xca\xfd\xca\xfd\xae\xfd\xae\xfd\x0c\xfe\x0c\xfeC\xfeC\xfeX\xfeW\xfeh\xfeh\xfef\xfef\xfe\xaf\xfe\xaf\xfe\xbb\xfe\xbb\xfe\xf7\xfe\xf7\xfe\r\xff\r\xff\xc5\xfe\xc5\xfe\xb0\xfe\xaf\xfe\x14\xfe\x14\xfe\x00\xfe\x00\xfe\xad\xfd\xae\xfdP\xfdP\xfd\xc9\xfd\xc9\xfd\xaa\xfd\xaa\xfd\xce\xfd\xce\xfd~\xfd}\xfdd\xfdd\xfd\x9d\xfd\x9c\xfd?\xfe@\xfe\xf7\xfe\xf6\xfe\xad\xfe\xae\xfez\xffy\xffe\xffe\xffZ\xffZ\xff\xa3\xfe\xa4\xfe\x98\xfe\x97\xfe\xb9\xfe\xb9\xfe\x81\xff\x82\xff~\xfe}\xfe\x14\xff\x14\xff\x04\xff\x05\xff\xba\xfe\xba\xfe!\xff!\xff\x89\xff\x89\xff\xdc\xff\xdd\xff\xea\x01\xea\x01\x16\x02\x16\x02\x07\x02\x07\x02T\x03U\x03\xe2\x03\xe1\x03Z\x04Z\x04/\x05/\x05\xee\x05\xee\x05\xb6\x07\xb6\x07\xe6\x07\xe6\x07K\x08K\x08\xee\x08\xee\x08\x10\t\x11\t\xef\t\xef\t\xdc\n\xdc\n\x90\x0b\x90\x0b\x1c\r\x1c\r\xf5\r\xf5\r8\r8\r\xb6\x0f\xb6\x0f\x1d\x11\x1e\x11\xf5\x10\xf5\x10\x9b\x11\x9b\x11~\x12}\x12\xca\x12\xca\x12\x12\x13\x13\x13\x0b\x14\n\x14U\x14U\x14\x85\x14\x85\x14\xa5\x14\xa5\x14H\x15H\x15\xe2\x15\xe2\x15\x14\x16\x14\x16\xaa\x14\xaa\x14\x99\x13\x99\x13w\x14w\x14\x17\x14\x18\x14\x16\x14\x16\x14\x92\x13\x92\x13\xce\x13\xcf\x138\x148\x14=\x13=\x13\xf8\x12\xf8\x12l\x13l\x13q\x13s\x13N\x13N\x13h\x13h\x13\x10\x13\x10\x13\xd7\x12\xd7\x12\x0b\x12\x0b\x12\x9b\x12\x9b\x12\xad\x12\xad\x12\xb8\x12\xb8\x12\x07\x12\x07\x12\xb8\x11\xb9\x11\\\x11\\\x119\x119\x11\xc0\x10\xc0\x10g\x10g\x10\xe6\x0f\xe6\x0fx\x0fx\x0f\x1d\x0f\x1d\x0f\xa6\x0e\xa6\x0e\xb6\x0e\xb6\x0e\xae\x0e\xae\x0e\xa0\x0e\xa0\x0e\x9d\x0e\x9d\x0eC\x0eB\x0e\xd1\r\xd1\r2\r2\r\xc1\x0c\xc0\x0cD\x0cD\x0c\xe2\x0b\xe3\x0b%\x0b%\x0bK\nL\n}\t}\t\xcd\x08\xcd\x08E\x08E\x08\xb8\x07\xb7\x07\x1b\x07\x1b\x07Y\x06Y\x06\xb2\x05\xb3\x05\x04\x05\x04\x05\x82\x04\x82\x04\xf8\x03\xf9\x03}\x03}\x03\xd9\x02\xd9\x02\t\x02\t\x02<\x01<\x01i\x00i\x00\x8d\xff\x8e\xff\xbf\xfe\xbf\xfe\x1c\xfe\x1c\xfe\xb8\xfd\xb8\xfd\x07\xfd\x07\xfdb\xfcb\xfc\xea\xfb\xea\xfbp\xfbp\xfb;\xfb<\xfbT\xfbT\xfba\xfba\xfb5\xfb6\xfb>\xfb=\xfb)\xfb)\xfbQ\xfbQ\xfbf\xfbe\xfb\xbe\xfb\xbe\xfb\x0f\xfc\x0f\xfc<\xfc<\xfc\xd9\xfb\xd8\xfb\xa7\xfb\xa7\xfbZ\xfbY\xfb\xf6\xfa\xf6\xfa\xdf\xfa\xdf\xfa/\xfa/\xfax\xf9x\xf9\x05\xf9\x05\xf9\x17\xf9\x17\xf9\xb8\xf8\xb8\xf8\x85\xf8\x85\xf8\xc7\xf8\xc7\xf8\xd4\xf8\xd4\xf8\x8a\xf8\x8b\xf8~\xf8}\xf8\xdc\xf8\xdc\xf8,\xf9,\xf9\xbe\xf9\xbe\xf9\xa3\xf9\xa3\xf9\xa4\xf9\xa4\xf9\xd5\xf9\xd5\xf9\xbd\xf8\xbd\xf8\x9a\xf8\x9b\xf8L\xf8M\xf8q\xf7q\xf7-\xf8-\xf8\xda\xf7\xda\xf7!\xf7!\xf7\x15\xf7\x14\xf79\xf79\xf7\xe9\xf6\xea\xf6\xed\xf6\xed\xf6v\xf7u\xf7Q\xf7R\xf7\x18\xf6\x18\xf6q\xf5q\xf5P\xf6P\xf6$\xf7#\xf7\\\xf7\\\xf7\xf8\xf7\xf8\xf7\xf7\xf8\xf8\xf8\x0c\xf9\x0b\xf9\xcd\xf8\xcd\xf8x\xf8y\xf8\t\xf8\t\xf8!\xf8!\xf8;\xf7<\xf7\x98\xf7\x98\xf7\x0e\xf8\x0e\xf8\x1c\xf8\x1c\xf8\x1e\xf7\x1e\xf7\x94\xf7\x94\xf7\xe1\xf7\xe0\xf7(\xf8)\xf8\x8e\xf8\x8e\xf8\xf4\xf9\xf4\xf9\x8e\xf8\x8f\xf8V\xf9V\xf9\x84\xfa\x84\xfal\xfak\xfa9\xfa9\xfa\xe6\xfa\xe6\xfaw\xf9v\xf9\x05\xf9\x06\xf9\xbd\xf9\xbd\xf9*\xf9)\xf9\xea\xfa\xea\xfa\xca\xfb\xca\xfb^\xfb^\xfb\x08\xfa\x08\xfa\xd2\xf9\xd3\xf9K\xf9K\xf9(\xfa(\xfaZ\xfa[\xfaH\xf8H\xf8\xa1\xfa\xa1\xfa\x9c\xf9\x9b\xf9l\xf8l\xf8=\xfb>\xfbg\xfbf\xfb4\xfc4\xfcB\xfcB\xfc!\xfc \xfc6\xfc7\xfc\xee\xfa\xed\xfa\xba\xfb\xbb\xfb}\xfb}\xfbQ\xfbQ\xfb)\xfa(\xfa\x05\xfc\x05\xfc\xab\xf9\xab\xf9\x02\xfb\x02\xfb\n\xfb\n\xfb\xde\xfb\xde\xfb\x1d\xfc\x1d\xfcU\xfcT\xfc\xde\xfb\xde\xfb\x05\xfc\x05\xfc6\xfd6\xfdj\xfdi\xfd\xdc\xfe\xdc\xfe!\xfe!\xfex\xffx\xff\x00\xff\x00\xff$\xff$\xff\x9a\xff\x99\xff\x8a\xff\x8b\xff\x07\xff\x07\xffS\x01T\x01\x19\xff\x19\xff\x0b\xfe\x0b\xfe\xf9\xfe\xf9\xfe\x9a\xff\x9a\xff-\x01.\x01t\x01t\x016\x006\x00\xb7\x00\xb7\x00\x0f\x01\x0f\x01\xc7\x00\xc7\x00(\x00(\x00\xb1\x01\xb2\x01\xb4\x02\xb4\x02\xea\x02\xe9\x02V\x01W\x01N\xffN\xff5\x005\x002\x013\x01\x18\x01\x17\x01\x06\x02\x06\x02\x89\x01\x89\x01\x85\x00\x85\x00\xf2\xff\xf2\xffv\xffw\xffi\xfei\xfeL\xffL\xff9\x00:\x00\x9b\x01\x9b\x01\x1a\x00\x1a\x00\xfc\xff\xfb\xffr\x01r\x01\xa8\x00\xa9\x00\xc4\x02\xc4\x02\xb4\x02\xb4\x02\xde\x00\xdf\x00\x19\x01\x19\x012\x012\x01z\x02z\x02\xc9\x01\xca\x01\xba\x00\xba\x00\xd3\xff\xd4\xff\x8e\xff\x8e\xff\x13\x03\x12\x03\xae\x02\xaf\x02{\x04{\x04j\x00i\x00\x0f\x02\x0f\x02\xb8\x02\xb8\x02\x1b\x03\x1a\x031\x051\x059\x029\x02?\x03>\x03\xb2\x05\xb3\x05,\x05,\x05f\x04f\x04r\x04r\x04\t\x04\t\x04\xa0\x03\xa0\x03\xc9\x01\xc9\x01\x04\x06\x04\x06\xf6\x02\xf6\x02\xa1\x00\xa0\x00K\x01K\x01\x99\x03\x99\x03,\x01,\x01V\x01V\x01z\x03z\x03=\x03>\x03\xd3\x05\xd3\x05z\x04y\x04\xa4\x02\xa4\x02:\x04;\x04\x08\x01\x08\x01p\x03p\x03\x97\x04\x97\x04\x01\x07\x00\x07\x1b\x03\x1b\x03:\x04;\x04\xff\x02\xff\x02\x7f\x03\x7f\x03\xf4\x04\xf4\x04\xb6\x07\xb6\x07\xaf\x03\xaf\x03$\x03$\x03R\x06R\x06+\x05,\x05\x1d\x04\x1d\x04\x89\x03\x89\x03b\x03a\x03\xa3\x03\xa2\x03\xd8\x01\xd8\x01L\x04L\x04\x00\x00\x00\x00\\\x02\\\x020\x040\x04\xe2\x02\xe1\x02\x1f\x02\x1f\x02i\x03h\x03\xe1\x02\xe2\x02\xc5\x03\xc5\x03(\x02(\x02\x10\xff\x10\xff\x86\xff\x86\xff\x9a\x00\x99\x00\x99\x03\x9a\x03\xde\xfe\xde\xfe\xc2\x01\xc3\x01\xc8\x01\xc7\x01\xa3\xfe\xa3\xfe!\xff!\xff\xcc\x01\xcb\x01\x9a\x01\x9a\x01\x06\x00\x06\x00J\x02J\x02R\x00Q\x00s\x01t\x01B\x01A\x01/\x000\x00+\x01+\x01R\x01R\x01]\x02]\x02%\x01%\x01\x89\x00\x88\x00z\x01z\x01l\xffl\xff\xd9\x00\xd9\x00\x1a\x02\x19\x02W\x00X\x00\x06\x00\x05\x00\xf8\x01\xf8\x01\xfb\xfd\xfb\xfd\xd5\xff\xd5\xff\x85\x01\x86\x01\xf9\x03\xf9\x03f\x02f\x02\x91\x01\x91\x01\xd5\x02\xd5\x02:\x019\x01\xfd\x01\xfd\x01\x8a\x03\x89\x03\xcd\x02\xce\x02\'\x00\'\x00\xbc\x01\xbc\x01^\x00^\x00\xd1\xff\xd1\xff6\x027\x02\n\x00\t\x00)\x03)\x03\xec\xff\xed\xff\x89\x02\x89\x02L\xfeM\xfeo\x01o\x01\xab\xfe\xab\xfeS\x00S\x00\xdd\x02\xde\x02k\x04k\x04r\x05s\x05,\x03+\x03I\x04H\x04\xd7\x00\xd8\x00\x01\x00\x02\x00F\x07F\x07?\x03?\x03\x18\x03\x17\x03\x1f\x03\x1f\x03\x16\x00\x16\x00\xbf\x00\xbe\x00\xf3\x01\xf4\x01~\x03~\x03\x88\x04\x87\x04p\x04p\x04\x16\x02\x16\x02\n\x03\n\x03\xd6\x01\xd5\x01\x83\x03\x83\x034\x063\x060\x020\x02\xc7\x00\xc8\x00\xd1\x04\xd1\x04\xf2\x04\xf2\x04\x89\x02\x89\x02\xfa\x04\xfb\x04)\x05(\x05\xe4\x05\xe4\x05\x05\x04\x05\x04\xcd\x02\xcd\x02k\x02l\x02\xa9\x01\xa8\x01\xf4\x02\xf5\x02E\x02E\x02\xc6\x02\xc6\x028\x067\x06\x1c\x03\x1c\x03\xf3\x03\xf2\x03J\x04J\x04\x1d\x02\x1e\x02\xe2\x03\xe2\x03\x95\x05\x95\x05a\x05a\x05\x11\x05\x10\x05S\x05S\x05|\x03|\x03\xe7\x05\xe7\x05,\x03,\x03n\x05o\x05\xba\x01\xba\x01&\x02&\x02\xd6\x03\xd6\x03\xd0\x00\xd0\x00\x02\x02\x02\x02\x0c\x01\x0c\x01a\x05a\x05\x1b\x02\x1b\x02\x8b\x03\x8b\x03V\x03U\x03s\x01s\x01_\x03_\x03\x1f\x05 \x05\x04\x03\x03\x03U\x00V\x009\x029\x02E\x02D\x02\xba\x01\xba\x01\x8f\x03\x8f\x03N\x03M\x03\x1d\x00\x1d\x00`\x01`\x01L\x01L\x01\xc3\xff\xc2\xff\t\x00\t\x00\x98\xfd\x97\xfd6\x015\x01\x83\x02\x84\x02U\x02V\x02\xc5\x01\xc5\x01\x82\x02\x82\x02\xdc\x01\xdd\x01\n\x02\n\x02\xc6\x02\xc5\x02\xcd\x01\xce\x01\xa1\x00\xa1\x00:\x039\x03\x05\x00\x06\x00\xb9\x03\xb8\x03\xa7\x00\xa8\x00\xe1\x00\xe1\x00\xd9\x01\xd9\x01C\xffD\xff\xe6\xfe\xe5\xfe1\x011\x01\xa9\xfd\xa8\xfd\xa1\xff\xa1\xff\xca\xfc\xc9\xfc\x85\x01\x85\x01\x1c\x01\x1c\x01\x83\x00\x83\x00a\x02a\x02!\xfd"\xfd\xb6\x00\xb6\x00\xb1\xff\xb2\xff\x8c\xff\x8c\xff\xd7\x02\xd7\x02\x1a\x00\x19\x00\x8a\x01\x8a\x01\x99\xfe\x98\xfe\x16\xfd\x17\xfd\xa0\x00\xa0\x00\xef\x00\xef\x00s\xf9s\xf9\xca\xff\xcb\xff\x95\xff\x94\xff\xfb\xfd\xfb\xfd\x0b\xff\x0b\xfff\xffe\xff\x1e\xfe\x1e\xfe\x11\x00\x12\x00\xa0\xfe\xa0\xfe_\x00_\x00p\x00p\x00\xcf\x00\xcf\x00D\xffC\xff\xa0\x01\xa0\x01\x01\x02\x01\x02\x9a\x01\x9a\x01!\xff!\xff\xab\xfe\xab\xfem\xffn\xffX\xfeW\xfe\x0f\xfe\x0f\xfeY\xffX\xff\xcf\xff\xcf\xffD\xfcD\xfc\xd0\xff\xcf\xff\xd3\x00\xd3\x00\xed\xfe\xee\xfe\xcf\x00\xcf\x00?\xfe?\xfeU\xfeU\xfe\xda\x02\xda\x02\x1c\x02\x1c\x02\xf4\x01\xf5\x01.\x00.\x00\xf0\x01\xf0\x010\xfe0\xfe\xa5\xfe\xa5\xfe\xa0\x00\xa0\x00 \xfd \xfd\xde\xff\xde\xffS\xfdS\xfd\x19\xfd\x1a\xfd\xcd\xff\xcc\xffE\xffE\xff\x92\xff\x92\xff\x03\xfe\x02\xfe\xf4\xff\xf5\xffa\xfea\xfe\x9e\xfc\x9e\xfc\xb9\xff\xb9\xffo\xffp\xff\x82\x00\x83\x00\xbc\xff\xbc\xffs\xffs\xff\xc9\xff\xc9\xff\xce\xfe\xce\xfew\xfbw\xfb[\xfb[\xfb\xae\xfb\xad\xfb\xc6\xfb\xc6\xfbz\xfaz\xfa[\xfb[\xfb\xab\xfc\xab\xfcz\xfby\xfbe\xfaf\xfa\x1d\xf8\x1c\xf8\xa7\xfd\xa6\xfd\xcf\xfa\xcf\xfaQ\xf9Q\xf9[\xfd[\xfdZ\xfdZ\xfd/\xfe/\xfe\xb1\xfd\xb1\xfd\'\xfd\'\xfd\x8e\xfb\x8e\xfb\xa1\xfa\xa1\xfa\xd4\xfd\xd4\xfd\xf0\xfb\xf1\xfb\xd5\xfc\xd5\xfc\xd7\xfc\xd6\xfc\xff\xfd\xff\xfd\xde\xfb\xdf\xfb\xe7\xfa\xe7\xfa\xf2\xfa\xf2\xfa\xb8\xfb\xb8\xfb\x08\xfb\x08\xfb\x98\xfd\x99\xfd\x9c\xff\x9c\xff\xf7\xfa\xf7\xfa\xe2\xfb\xe2\xfbl\xffl\xffF\x00F\x00\x85\x00\x85\x002\xff2\xff+\xfd+\xfd\t\x00\n\x00\t\x01\t\x01S\x00R\x00\xaf\xfd\xaf\xfdE\x00E\x00M\xfeM\xfe\xa4\xfd\xa5\xfd\xb1\x01\xb0\x01\x99\xff\x99\xffK\xffK\xff\xb0\x00\xaf\x004\xfe4\xfe\xb5\xff\xb5\xffd\xfcd\xfc\xde\xfc\xde\xfc\xf5\x00\xf5\x00\xe1\xfe\xe1\xfe\x06\x02\x05\x02\xa8\x00\xa9\x00\x10\x02\x11\x02X\x00X\x00\x05\x04\x05\x04\x89\xfc\x89\xfc7\x008\x00\x8f\x01\x8e\x01\xa9\x00\xa9\x00\x1a\xff\x1b\xff4\x004\x00\xda\xff\xda\xff\x14\xff\x14\xffG\xfaH\xfa\x89\xff\x89\xff\xf6\xff\xf6\xff\xf8\xfe\xf8\xfe\x16\xfe\x17\xfe\xc0\x00\xbf\x00\xc8\xff\xc9\xff\xe5\xfc\xe4\xfc\xff\xfd\xff\xfd8\x008\x00\xb5\x01\xb5\x01\xfa\x00\xfb\x00\xd2\xfe\xd1\xfe0\xff0\xff\xfc\x01\xfc\x01&\x00\'\x00?\xfe?\xfe\xe2\xff\xe2\xff\xec\xfe\xec\xfej\xffj\xff\x9c\xfe\x9b\xfe\xa2\xfc\xa3\xfc_\xfd_\xfd\x14\xfe\x14\xfe\xee\xfd\xee\xfd{\xfe{\xfe\xf3\xfe\xf3\xfe)\xfe)\xfez\xfe{\xfe\xe0\xfe\xe0\xfe,\xfd,\xfd\xa9\xfa\xa9\xfa\xf7\x00\xf7\x00\xf0\xfe\xf0\xfe|\xfd|\xfd`\xff`\xff\x12\xfc\x12\xfcg\xffg\xff\x8a\xfc\x8a\xfc\xa9\xf9\xa9\xf9<\xfc<\xfc\x02\xfc\x02\xfc#\xfb#\xfb\x86\xfc\x86\xfc\xcb\xfb\xcb\xfb\xfe\xfb\xfe\xfbr\xfcr\xfck\xfek\xfe\x17\xfc\x16\xfc\xa9\xfc\xaa\xfcu\xfbu\xfb\xff\xfd\xff\xfd\x8a\xfe\x89\xfe\'\x00(\x00\xb1\xfd\xb0\xfd\xdb\xfc\xdb\xfc\xba\xfb\xba\xfb\xcc\xfc\xcc\xfc\x8b\xfd\x8b\xfd\x11\xfc\x11\xfc{\xfe{\xfe\x80\xfb\x80\xfb\xa7\xfb\xa6\xfb7\xfa7\xfaM\xf9N\xf9\x15\xfd\x15\xfd\xff\xf9\xff\xf9\xd8\xfc\xd8\xfc\xaf\xfb\xae\xfbh\xfbi\xfb!\xfe!\xfem\xfcm\xfcS\xfdS\xfd\xc3\xfc\xc2\xfc1\xfd2\xfd@\xfc?\xfc\xb4\xfb\xb3\xfb\x8f\xfb\x8f\xfb+\xfb,\xfb\xc2\xf9\xc2\xf9u\xf9u\xf9~\xfc}\xfc\x7f\xfc\x80\xfc\xba\xfa\xba\xfaj\xf9j\xf9M\xfbM\xfbt\xfbt\xfb\xdd\xfa\xdd\xfa;\xfa;\xfa"\xfd"\xfd\xe8\xfc\xe8\xfc)\xfb)\xfb\x87\xfc\x87\xfc{\xfc{\xfc\x0f\xfd\x0f\xfd)\xfc)\xfc\xe4\xfb\xe4\xfb\xaf\xfb\xaf\xfb\x0e\xfe\x0e\xfe\xb3\xfb\xb3\xfb,\xfa,\xfau\xfbu\xfb\xbb\xf8\xbb\xf8\xf0\xfa\xf0\xfaS\xfbS\xfbg\xfag\xfa)\xf9*\xf9\xaf\xf7\xaf\xf7\xd1\xfa\xd1\xfa\xdd\xfb\xde\xfb\x1c\xfc\x1c\xfc\x06\xfb\x07\xfb\x91\xfb\x90\xfbI\xfaJ\xfa\x98\xfc\x99\xfc\x91\xfb\x92\xfbq\xfbq\xfb\xee\xfb\xef\xfb\xb1\xf9\xb1\xf9I\xfbI\xfb\xa3\xfc\xa3\xfc\xe5\xf8\xe5\xf8\xcf\xfa\xcf\xfa\xe1\xfa\xe1\xfaF\xfbF\xfb;\xf9;\xf9\x01\xfc\x01\xfc\xa8\xfb\xa8\xfb\xf1\xfa\xf1\xfa\x8d\xfc\x8d\xfc\xcf\xfa\xce\xfaM\xfcM\xfc\x95\xfc\x94\xfc\xcd\xfc\xcd\xfc>\xfb?\xfb\xdb\xfc\xdb\xfcA\xfaA\xfa\xfb\xfa\xfa\xfa.\xfd-\xfd\xc7\xfa\xc8\xfag\xfeg\xfe\xb9\xfa\xb9\xfa\x0e\xfd\x0e\xfd\xff\xf8\xff\xf8\xd5\xfa\xd5\xfa\x02\xfd\x02\xfd\x00\xfd\x00\xfd\xc9\xfa\xc9\xfa\xe4\xfc\xe5\xfc\x1d\xff\x1c\xff\xf1\xff\xf2\xff\x95\xfe\x94\xfe\xb4\xfe\xb4\xfe~\xfd\x7f\xfd3\x003\x00M\xfdM\xfd@\xfe@\xfe\xa5\xfe\xa5\xfe\xc1\xfe\xc0\xfe\x10\x00\x10\x00O\x00O\x00\xa0\xfe\xa1\xfe\xa3\xff\xa3\xff\xdd\xfe\xdd\xfe\xac\x00\xac\x00\xbf\x00\xbf\x00i\x01j\x01\x9a\x00\x9a\x00"\x01"\x01\xe3\x00\xe3\x00\xfb\x00\xfb\x00\x8a\x03\x8a\x03P\x01P\x01u\x02u\x02\x8b\x02\x8c\x02\x9a\xff\x9a\xff\x13\x02\x14\x02<\x03;\x03\xc9\x02\xca\x02\xaf\x01\xaf\x01{\xff{\xff\x06\xfe\x06\xfeQ\x00Q\x00#\x03#\x03\xcb\x03\xcc\x03\xdc\xfe\xdb\xfe\xa9\x02\xaa\x02\xb3\x03\xb3\x03\xbb\x00\xbb\x00\x84\x02\x84\x02\r\x04\x0c\x04/\x04/\x04\x9e\x03\x9e\x03\x06\x04\x05\x04t\x05u\x05\xb5\x02\xb5\x02\x7f\x04\x80\x04\xed\xff\xec\xff\xec\x03\xed\x03\x17\x02\x17\x02\xa2\x00\xa2\x00 \x01 \x01d\x02d\x02\xed\xfe\xed\xfe\xce\x02\xce\x02L\x01L\x01\x89\x02\x8a\x02\x9a\x00\x99\x00z\x02z\x02\x19\x03\x18\x03\x9b\x02\x9b\x02\xf6\x00\xf6\x00\xe8\x01\xe8\x01e\x01e\x01\x02\x02\x02\x02\xb2\xfe\xb1\xfe\xe5\xfd\xe5\xfd\xf2\x00\xf2\x00\x98\x01\x99\x01\xdc\x00\xdc\x00\x8e\xff\x8e\xff3\xfe3\xfe\n\xff\n\xffv\xfdv\xfda\xfea\xfeu\xfdu\xfd+\xfe*\xfe\xb4\xfd\xb4\xfdW\xfdW\xfdO\xfcP\xfc`\xfb`\xfb\xaa\xfb\xab\xfbJ\xfbJ\xfbT\xfbU\xfb}\xfd}\xfd-\xfe-\xfe\xd7\xfb\xd7\xfb\xc8\xfb\xc8\xfb\xf2\xfc\xf2\xfc\xca\xfd\xca\xfd\x94\xfa\x94\xfa\xcf\xfb\xcf\xfb\xde\xf9\xde\xf9\x8b\xfb\x8b\xfbR\xf9R\xf9\xce\xfa\xce\xfa\xee\xf8\xee\xf8\xf5\xf9\xf5\xf9\x8a\xfc\x8a\xfc6\xf96\xf9/\xfc/\xfc\xc3\xf8\xc4\xf8\xcf\xf9\xcd\xf9G\xfbH\xfb\xf9\xfc\xf9\xfcO\xfbO\xfbd\xfbd\xfb4\xfb4\xfb\xce\xfa\xcd\xfa\x1a\xfc\x1b\xfc!\xfb!\xfb \xfc \xfc~\xfb~\xfb\x8a\xf9\x8a\xf9\x00\xf9\x00\xf9\xbb\xf9\xbb\xf9\x96\xfb\x96\xfb\\\xfa]\xfa\x01\xfb\x01\xfb\x07\xfa\x07\xfa2\xfa2\xfa\x84\xfb\x84\xfbz\xfb{\xfbc\xfbb\xfb\x1a\xfc\x1b\xfc\x89\xfb\x89\xfb\x18\xfc\x18\xfcj\xfcj\xfc\xa0\xfb\xa1\xfb\xe9\xf9\xe8\xf9\x12\xfc\x12\xfc\xdf\xfd\xdf\xfd\xe3\xfa\xe3\xfa2\xfa2\xfa\xcd\xfb\xcd\xfb\x02\xfd\x02\xfd\xfc\xf9\xfd\xf9\xbb\xfb\xb9\xfb\x87\xfc\x87\xfc\xa5\xfa\xa5\xfaB\xfcA\xfcF\xfaG\xfa\x89\xfc\x89\xfci\xfei\xfe]\xfd]\xfdm\xfbm\xfb\x94\xfc\x94\xfcm\xfbm\xfb\x1d\xfd\x1e\xfd\x01\xfe\x01\xfe\xcb\xfb\xcb\xfb\xb5\xfd\xb5\xfd\x8a\xfd\x89\xfd\x07\xfe\x07\xfe \xfc\x1f\xfc\xb2\xfd\xb3\xfd1\xfc2\xfc\x1f\xfc\x1f\xfc\xee\xfb\xee\xfbL\xfcL\xfc\xb2\xfc\xb2\xfc\xfd\xfc\xfd\xfc\xa7\xfc\xa7\xfcc\xfdb\xfd\xa8\xfb\xa9\xfb\xcb\xfe\xcb\xfem\xfem\xfeQ\xfeQ\xfe%\xfe%\xfen\xfdn\xfdG\xfdF\xfdV\xfeV\xfe\xd1\xfd\xd2\xfdk\xfek\xfen\xfcm\xfc3\xfc3\xfc\xc1\xfe\xc1\xfe(\xfe(\xfe\x1a\xfd\x1b\xfd=\xfd>\xfd\xb1\xfd\xb1\xfdu\xfdv\xfd\xc3\xfd\xc2\xfdt\x00t\x00\r\xff\x0e\xff\x99\xfd\x99\xfdX\xfeX\xfe\x0b\xff\n\xff\xec\xff\xec\xff\x92\xff\x92\xfff\x00f\x00\xbe\x00\xbe\x00z\xff{\xff\xd3\x00\xd4\x00!\x00!\x00\x03\x00\x03\x00)\x00)\x00]\xff]\xff\xb3\xfe\xb3\xfeE\xffE\xff8\x008\x00P\xffP\xff\x89\xff\x89\xff\xfa\xfe\xfa\xfe\x00\xff\x00\xff\xd9\x00\xda\x005\x015\x018\x018\x01\xda\x02\xda\x02i\x00i\x00~\x00~\x00\xaf\x00\xaf\x00\xd6\x00\xd7\x00\xde\x01\xdd\x01}\x01}\x01\xe1\xff\xe1\xff(\x00)\x00|\x00|\x00\xa3\x00\xa3\x00\xe6\x01\xe7\x01R\x00Q\x00\xe1\x01\xe1\x01\xda\xfe\xdb\xfe\x80\x00\x80\x00\xc6\x00\xc5\x00\xd4\x01\xd4\x01~\x00~\x00'
        while self.Client.STATE == "CONNECTED":
            # print("Recorder", self.Client.STATE)
            index += 1
            if index == 10:
                time.sleep(0.05)
                index = 0
            data = stream.read(self.CHUNK, exception_on_overflow = False)
            # print(len(data))
            # block.append(data)
            # self.Client.queue.append(test[index*128:(index+1)*128])
            # index = (index+1)%10

            if len(self.Client.queue) < self.Client.maxLength:
                # print("加入队列消息, 当前队列长度: {0}".format(len(self.Client.queue)))
                if len(self.Client.queue) > 10:
                    time.sleep(0.02)
                self.Client.queue.append(data)
            else:
                pass
                # print("已经达到最大缓存长度, 开始丢包")
        # 关闭
        self.stream.close()
        self.p.close()